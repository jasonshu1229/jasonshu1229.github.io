<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>前端时光屋</title>
    <meta name="description" content="梁书豪的博客">
    <meta name="generator" content="VuePress 1.3.0">
    <link rel="icon" href="/assets/img/head.jpg">
    
    <link rel="preload" href="/assets/css/0.styles.83ce72a3.css" as="style"><link rel="preload" href="/assets/js/app.06b24de5.js" as="script"><link rel="preload" href="/assets/js/2.a05443f6.js" as="script"><link rel="preload" href="/assets/js/54.6b19fef9.js" as="script"><link rel="prefetch" href="/assets/js/10.a5eaa95a.js"><link rel="prefetch" href="/assets/js/11.06e35382.js"><link rel="prefetch" href="/assets/js/12.140f4db6.js"><link rel="prefetch" href="/assets/js/13.f2fcf962.js"><link rel="prefetch" href="/assets/js/14.e39a2df6.js"><link rel="prefetch" href="/assets/js/15.b07ecf86.js"><link rel="prefetch" href="/assets/js/16.949e4dac.js"><link rel="prefetch" href="/assets/js/17.6a721f97.js"><link rel="prefetch" href="/assets/js/18.1b363edf.js"><link rel="prefetch" href="/assets/js/19.900530d5.js"><link rel="prefetch" href="/assets/js/20.e9f183ae.js"><link rel="prefetch" href="/assets/js/21.6c08f73f.js"><link rel="prefetch" href="/assets/js/22.c37ad609.js"><link rel="prefetch" href="/assets/js/23.759a99ff.js"><link rel="prefetch" href="/assets/js/24.c8f3fa94.js"><link rel="prefetch" href="/assets/js/25.b58c3ab8.js"><link rel="prefetch" href="/assets/js/26.ba5e0c3b.js"><link rel="prefetch" href="/assets/js/27.ad23a71d.js"><link rel="prefetch" href="/assets/js/28.a74c53ca.js"><link rel="prefetch" href="/assets/js/29.30ef0dde.js"><link rel="prefetch" href="/assets/js/3.a21791ca.js"><link rel="prefetch" href="/assets/js/30.1e9ebdb5.js"><link rel="prefetch" href="/assets/js/31.30b7a1e3.js"><link rel="prefetch" href="/assets/js/32.9f1ded02.js"><link rel="prefetch" href="/assets/js/33.61ac7552.js"><link rel="prefetch" href="/assets/js/34.f040c739.js"><link rel="prefetch" href="/assets/js/35.2c5d08d5.js"><link rel="prefetch" href="/assets/js/36.257c41df.js"><link rel="prefetch" href="/assets/js/37.40a1bbc2.js"><link rel="prefetch" href="/assets/js/38.5415ab64.js"><link rel="prefetch" href="/assets/js/39.90b605f0.js"><link rel="prefetch" href="/assets/js/4.21591d40.js"><link rel="prefetch" href="/assets/js/40.5e9ae863.js"><link rel="prefetch" href="/assets/js/41.884155d7.js"><link rel="prefetch" href="/assets/js/42.1ec6dd60.js"><link rel="prefetch" href="/assets/js/43.47cf7283.js"><link rel="prefetch" href="/assets/js/44.7af49fad.js"><link rel="prefetch" href="/assets/js/45.6088e1a9.js"><link rel="prefetch" href="/assets/js/46.fd004b63.js"><link rel="prefetch" href="/assets/js/47.044fc351.js"><link rel="prefetch" href="/assets/js/48.55a5f3fb.js"><link rel="prefetch" href="/assets/js/49.e103d7ad.js"><link rel="prefetch" href="/assets/js/5.db726197.js"><link rel="prefetch" href="/assets/js/50.f945ce05.js"><link rel="prefetch" href="/assets/js/51.316d410a.js"><link rel="prefetch" href="/assets/js/52.92a10b4a.js"><link rel="prefetch" href="/assets/js/53.e7534ba4.js"><link rel="prefetch" href="/assets/js/55.e3fc3b29.js"><link rel="prefetch" href="/assets/js/56.0e152b3e.js"><link rel="prefetch" href="/assets/js/57.13187b13.js"><link rel="prefetch" href="/assets/js/58.d9bda000.js"><link rel="prefetch" href="/assets/js/59.da580bc1.js"><link rel="prefetch" href="/assets/js/6.ecb72c20.js"><link rel="prefetch" href="/assets/js/60.285d6cbd.js"><link rel="prefetch" href="/assets/js/61.2cdcce13.js"><link rel="prefetch" href="/assets/js/62.cf643bd2.js"><link rel="prefetch" href="/assets/js/63.137e165f.js"><link rel="prefetch" href="/assets/js/64.ce851e8d.js"><link rel="prefetch" href="/assets/js/65.8e7d5299.js"><link rel="prefetch" href="/assets/js/66.4369c90e.js"><link rel="prefetch" href="/assets/js/67.c769b698.js"><link rel="prefetch" href="/assets/js/68.bf74184c.js"><link rel="prefetch" href="/assets/js/69.17c602b3.js"><link rel="prefetch" href="/assets/js/7.6cbb1600.js"><link rel="prefetch" href="/assets/js/70.55df3357.js"><link rel="prefetch" href="/assets/js/71.4fccac4a.js"><link rel="prefetch" href="/assets/js/72.d4eeaf2a.js"><link rel="prefetch" href="/assets/js/73.30f9528a.js"><link rel="prefetch" href="/assets/js/74.4e91b153.js"><link rel="prefetch" href="/assets/js/75.cbd8b825.js"><link rel="prefetch" href="/assets/js/76.72f7b4b9.js"><link rel="prefetch" href="/assets/js/77.a30e1989.js"><link rel="prefetch" href="/assets/js/78.3c4b8b32.js"><link rel="prefetch" href="/assets/js/79.0897d95d.js"><link rel="prefetch" href="/assets/js/8.36911a7c.js"><link rel="prefetch" href="/assets/js/80.43c8044b.js"><link rel="prefetch" href="/assets/js/81.89c13b3c.js"><link rel="prefetch" href="/assets/js/82.df5cf081.js"><link rel="prefetch" href="/assets/js/83.885deed2.js"><link rel="prefetch" href="/assets/js/84.4ed1e2fa.js"><link rel="prefetch" href="/assets/js/85.8bade5eb.js"><link rel="prefetch" href="/assets/js/86.d39c8dda.js"><link rel="prefetch" href="/assets/js/87.15d43505.js"><link rel="prefetch" href="/assets/js/88.ee14fb59.js"><link rel="prefetch" href="/assets/js/89.c5ea7888.js"><link rel="prefetch" href="/assets/js/9.6d6cea10.js"><link rel="prefetch" href="/assets/js/90.2e83c22b.js"><link rel="prefetch" href="/assets/js/91.972a9ec4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.83ce72a3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">前端时光屋</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript" class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/JavaScript/basics/" class="nav-link router-link-active">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/advance/" class="nav-link">
  进阶
</a></li></ul></div></div><div class="nav-item"><a href="/Vue/base/" class="nav-link">
  Vue
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="React" class="dropdown-title"><span class="title">React</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/React/basics/" class="nav-link">
  用法
</a></li><li class="dropdown-item"><!----> <a href="/React/advance/" class="nav-link">
  原理
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Node" class="dropdown-title"><span class="title">Node</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Node/basics/" class="nav-link">
  用法
</a></li><li class="dropdown-item"><!----> <a href="/Node/advance/" class="nav-link">
  原理
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Webpack" class="dropdown-title"><span class="title">Webpack</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Webpack/basics/" class="nav-link">
  用法
</a></li><li class="dropdown-item"><!----> <a href="/Webpack/advance/" class="nav-link">
  原理
</a></li></ul></div></div><div class="nav-item"><a href="/Performance/" class="nav-link">
  性能相关
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试相关" class="dropdown-title"><span class="title">面试相关</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Interview/js/" class="nav-link">
  js
</a></li><li class="dropdown-item"><!----> <a href="/Interview/vue/" class="nav-link">
  vue
</a></li><li class="dropdown-item"><!----> <a href="/Interview/react/" class="nav-link">
  react
</a></li><li class="dropdown-item"><!----> <a href="/Interview/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/Interview/http/" class="nav-link">
  http
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript" class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/JavaScript/basics/" class="nav-link router-link-active">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/advance/" class="nav-link">
  进阶
</a></li></ul></div></div><div class="nav-item"><a href="/Vue/base/" class="nav-link">
  Vue
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="React" class="dropdown-title"><span class="title">React</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/React/basics/" class="nav-link">
  用法
</a></li><li class="dropdown-item"><!----> <a href="/React/advance/" class="nav-link">
  原理
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Node" class="dropdown-title"><span class="title">Node</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Node/basics/" class="nav-link">
  用法
</a></li><li class="dropdown-item"><!----> <a href="/Node/advance/" class="nav-link">
  原理
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Webpack" class="dropdown-title"><span class="title">Webpack</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Webpack/basics/" class="nav-link">
  用法
</a></li><li class="dropdown-item"><!----> <a href="/Webpack/advance/" class="nav-link">
  原理
</a></li></ul></div></div><div class="nav-item"><a href="/Performance/" class="nav-link">
  性能相关
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试相关" class="dropdown-title"><span class="title">面试相关</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Interview/js/" class="nav-link">
  js
</a></li><li class="dropdown-item"><!----> <a href="/Interview/vue/" class="nav-link">
  vue
</a></li><li class="dropdown-item"><!----> <a href="/Interview/react/" class="nav-link">
  react
</a></li><li class="dropdown-item"><!----> <a href="/Interview/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/Interview/http/" class="nav-link">
  http
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>堆栈内存及闭包作用域</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaScript/basics/000：浏览器进程与宏微任务.html" class="sidebar-link">000：浏览器进程与宏微任务</a></li><li><a href="/JavaScript/basics/001：数据类型转换法则.html" class="sidebar-link">001：数据类型转换法则</a></li><li><a href="/JavaScript/basics/002：深度剖析parseInt的处理规则.html" class="sidebar-link">002：深度剖析parseInt的处理规则</a></li><li><a href="/JavaScript/basics/003：浏览器底层机制：EC、STACK、VO、AO、GO.html" class="sidebar-link">003：浏览器底层机制：EC、STACK、VO、AO、GO</a></li><li><a href="/JavaScript/basics/004：函数创建和执行的底层机制.html" class="sidebar-link">004：函数创建和执行的底层机制</a></li><li><a href="/JavaScript/basics/005：闭包作用域及其经典面试题.html" class="sidebar-link">005：闭包作用域及其经典面试题</a></li><li><a href="/JavaScript/basics/006：闭包的应用.html" class="sidebar-link">006：闭包的应用</a></li><li><a href="/JavaScript/basics/007：垃圾收集-机制.html" class="sidebar-link">007：垃圾收集-机制</a></li><li><a href="/JavaScript/basics/008：尾递归调用和优化.html" class="sidebar-link">008：尾递归调用和优化</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>浏览器的底层渲染机制及优化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>面向对象（OOP）和this处理</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaScript/basics/01：构造函数执行的细节知识点.html" class="sidebar-link">01：构造函数执行的细节知识点</a></li><li><a href="/JavaScript/basics/02：内置类的原型和原型链.html" class="active sidebar-link">02：内置类的原型和原型链</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JavaScript/basics/02：内置类的原型和原型链.html#内置类的原型" class="sidebar-link">内置类的原型</a></li><li class="sidebar-sub-header"><a href="/JavaScript/basics/02：内置类的原型和原型链.html#proto-与prototype的联系" class="sidebar-link">_proto_与prototype的联系</a></li><li class="sidebar-sub-header"><a href="/JavaScript/basics/02：内置类的原型和原型链.html#原型链的查找机制" class="sidebar-link">原型链的查找机制</a></li><li class="sidebar-sub-header"><a href="/JavaScript/basics/02：内置类的原型和原型链.html#原型链底层的执行机制" class="sidebar-link">原型链底层的执行机制</a></li><li class="sidebar-sub-header"><a href="/JavaScript/basics/02：内置类的原型和原型链.html#数组也是对象的真正含义" class="sidebar-link">数组也是对象的真正含义</a></li><li class="sidebar-sub-header"><a href="/JavaScript/basics/02：内置类的原型和原型链.html#真假公有私有属性" class="sidebar-link">真假公有私有属性</a></li><li class="sidebar-sub-header"><a href="/JavaScript/basics/02：内置类的原型和原型链.html#自定义类的原型和原型链" class="sidebar-link">自定义类的原型和原型链</a></li></ul></li><li><a href="/JavaScript/basics/03：内置new和Object.create的实现.html" class="sidebar-link">03：内置new和Object.create的实现</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ES6/ES7的核心知识</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>AJAX/HTTP前后端数据交互</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaScript/basics/000：浏览器进程与宏微任务.html" class="sidebar-link">000：浏览器进程与宏微任务</a></li><li><a href="/JavaScript/basics/001：AJAX.html" class="sidebar-link">001：AJAX</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>TypeScript教程</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><blockquote><p>三句话玩转面向对象</p></blockquote> <ol><li><p>每一个函数(构造函数[类])都天生具备一个<strong>属性“prototype原型”</strong>，<strong>属性值</strong>是一个对象，存储着当前类供实例调用的公共属性和方法</p></li> <li><p>在原型对象上有一个内置的属性<strong>constructor构造函数</strong>，存储的值是当前函数本身，所以我们把类称为构造函数</p></li> <li><p>每一个对象都天生具备一个属性**“proto隐式原型/原型链”**，属性指向自己所属类的原型对象</p> <p><strong>实例.proto === 所属类.prototype</strong></p></li></ol> <p>常见的函数类型：</p> <ul><li>普通函数</li> <li>构造函数</li> <li>内置类（Number，Array，Object，Boolean...）</li></ul> <p>常见的对象类型：</p> <ul><li>普通对象/数组对象/正则对象/日期对象...</li> <li>prototype/<strong><strong>proto</strong></strong></li> <li>类的实例（排除基本数据类型值的特性）</li> <li>函数也是对象</li></ul> <p>由此可见万物皆对象</p> <h2 id="内置类的原型"><a href="#内置类的原型" class="header-anchor">#</a> 内置类的原型</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">typeof</span> Number<span class="token punctuation">;</span> <span class="token comment">// &quot;function&quot;</span>
</code></pre></div><p>上面说到Array，Object都是内置类</p> <ul><li>每一个类都是一个函数，天生具备<strong>prototype原型</strong>属性，其<strong>属性值</strong>存储着当前类供实例调用的公共属性和方法。</li> <li>在原型对象上有一个内置的属性<strong>constructor构造函数</strong>，存储的值是当前函数本身，所以我们把类称为构造函数</li></ul> <p>下面画图分一下内置类的里面，以及它的<strong>prototype</strong>属性上，存了哪些东西：</p> <p>既然类有自己的属性 <strong>prototype</strong>，我们也可以把<strong>类</strong>理解为对象，看看类本身上，存了哪些东西</p> <blockquote><p>蓝色区域表示 类对象本身上有的属性</p> <p>黄色区域表示 类的prototype原型属性的属性值</p></blockquote> <p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gi7jum3hq1j30u00u77h2.jpg" alt="内置类属性和内置类prototype原型属性"></p> <h2 id="proto-与prototype的联系"><a href="#proto-与prototype的联系" class="header-anchor">#</a> ____proto____与prototype的联系</h2> <p>在三句话玩转面向对象中的第三点中，我们写到每一个对象都具备一个属性**____proto__隐式原型**，指向自己所属类的原型对象<strong>prototype</strong>。</p> <p>形象描述：实例.<strong><strong>proto</strong></strong>  =  所属类.prototype</p> <p>下面，我们用图来描述一下：</p> <p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gi7jyhxgmsj313l0jttdf.jpg" alt="____proto____与prototype的联系"></p> <p>上图中，我们先列举了内置类Array，Object的自己的属性方法，又通过它们的<strong>prototype原型</strong>，画出了供当前实例调用的一些公共方法和属性。</p> <p>紧接着，我们又定义了Array的两个实例对象，分别画出了它们的**<strong><strong>proto</strong></strong><strong>所指向自己所属类的</strong>prototype**</p> <p>最终，又画出了 构造函数|类，本身的**__<strong>proto</strong><strong>指向了</strong>Object基类<strong>的</strong>prototype**原型</p> <p>但是有一个明显的标红，那就是<strong>任何对象，构造函数，类的原型链顶端都是 null</strong></p> <p>下面，继续图解原型链的查找机制吧~</p> <h2 id="原型链的查找机制"><a href="#原型链的查找机制" class="header-anchor">#</a> 原型链的查找机制</h2> <p>从下图中，可以总结出原型链的机制：</p> <blockquote><p>访问对象的某个成员，首先看是否为私有属性，如果是私有的，则找的就是私有属性；</p> <p>如果不是，则基于**<strong><strong>proto</strong></strong><strong>找</strong>所属类.prototype**上的公共属性方法</p> <p>如果还是没有，则基于**<strong><strong>proto</strong></strong><strong>继续向上查找，直到找到</strong>Object.prototype**为止（null）</p></blockquote> <img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gi6pyzjldbj31na0u04ac.jpg" alt="原型链的查找机制" style="zoom:67%;"> <h2 id="原型链底层的执行机制"><a href="#原型链底层的执行机制" class="header-anchor">#</a> 原型链底层的执行机制</h2> <p>说到“执行”，大家最先想到的肯定是函数的执行，那么我们就上面的一个例子，来描述下过程：</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr1<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>
</code></pre></div><p>看看push函数是怎么一步步输出长度的？</p> <ul><li>arr1 实例先找自己的私有属性，发现没有push</li> <li>则基于**<strong><strong>proto</strong></strong><strong>找到</strong>Array.prototype<strong>上的属性方法，并把</strong>push**执行</li> <li>将<strong>Array.prototype.push = function push() {...}<strong>中的</strong>this</strong>指向被其调用的实例对象，这里指<strong>arr1</strong></li></ul> <blockquote><p>arr1.push() 执行</p> <p>等价于：</p> <ul><li><strong>Array.prototype.push.call(arr1)</strong></li> <li><strong>arr1.<strong><strong>proto</strong></strong>.push.call(arr1)</strong></li></ul></blockquote> <h2 id="数组也是对象的真正含义"><a href="#数组也是对象的真正含义" class="header-anchor">#</a> 数组也是对象的真正含义</h2> <p>相信很多小伙伴已经从下图中，看出来，<strong>数组实例对象</strong>可以调用<strong>Object.prototype</strong>原型上的方法。</p> <p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gi7k1xdmxcj313r0jytcr.jpg" alt="数组也是对象"></p> <blockquote><p>数组也是对象的含义：</p> <ul><li>因为数组可以通过原型链找到<strong>Object.prototype</strong>原型上提供的方法，或者说</li> <li><strong>Object.prototype</strong>上提供的方法一定是<strong>数组实例</strong>的公共方法</li></ul></blockquote> <h2 id="真假公有私有属性"><a href="#真假公有私有属性" class="header-anchor">#</a> 真假公有私有属性</h2> <p>曾经有这么一道面试题，困扰着我，它就是：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Array.prototype上能不能找到 hasOwnProperty属性</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 能找到</span>

<span class="token comment">// 下面代码输出什么？</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">&quot;push&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><p>在做上面这两道题的时候，我先问一下大家，<strong>Array.prototype对象</strong>上的属性是公有属性还是私有属性呢？</p> <p>回答是：</p> <blockquote><p>相当实例来说 是公有的</p> <p>相对自己来说 是私有的</p></blockquote> <p>所以第一个问题，<strong>Array.prototype</strong>能够通过原型链机制，找到其公有属性</p> <p>第二个问题，<strong>push</strong>相对于<strong>Array.prototype</strong>自己来说是私有属性，所以输出 true</p> <p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gi7k4acjegj313p0jw0x4.jpg" alt="真假公有私有属性"></p> <h2 id="自定义类的原型和原型链"><a href="#自定义类的原型和原型链" class="header-anchor">#</a> 自定义类的原型和原型链</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">getX</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token class-name">Fn</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getX</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">Fn</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getY</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> f1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fn</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> f2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fn</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gi6yq11ylgj31uc0u07fp.jpg" alt="自定义类的原型和原型链"></p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f1<span class="token punctuation">.</span>getX <span class="token operator">===</span> f2<span class="token punctuation">.</span>getX<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f1<span class="token punctuation">.</span>getY <span class="token operator">===</span> f2<span class="token punctuation">.</span>getY<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f1<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>getY <span class="token operator">===</span> <span class="token class-name">Fn</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>getY<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f1<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>getX <span class="token operator">===</span> f2<span class="token punctuation">.</span>getX<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f1<span class="token punctuation">.</span>getX <span class="token operator">===</span> <span class="token class-name">Fn</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>getX<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f1<span class="token punctuation">.</span>constructor<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Fn() {...}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Fn</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token class-name">__proto__</span><span class="token punctuation">.</span>constructor<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// null</span>
</code></pre></div><p>上面这几个输出结果应该，看图一目了然了。</p> <p>下面我们看一下这个几个问题，它们都分别指的是什么？</p> <div class="language-js extra-class"><pre class="language-js"><code>f1<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
f1<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
f2<span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Fn</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>我们在解答类似于以上原型链问题的时候，应该先画图，然后基于下面这3条步骤，就会很自然的答出来啦~</p> <blockquote><p>步骤1：先确定执行的是哪的方法（私有属性还是公有属性）</p> <p>步骤2：找到方法执行时，确定方法中的<strong>this</strong>指向问题</p> <p>步骤3：执行代码，确定结果</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f1<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 100</span>
<span class="token comment">// 步骤1：getX为私有属性</span>
<span class="token comment">// 步骤2：this指向 f1</span>
<span class="token comment">// 步骤3：执行私有属性的getX方法：console.log(this.x) =&gt; 100</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f1<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 步骤1：getX()为公有属性方法</span>
<span class="token comment">// 步骤2：this指向 f1.__proto__</span>
<span class="token comment">// 步骤3：执行共有属性方法： console.log(this.x)=&gt; f1.__proto__.x =&gt; undefined</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f2<span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 步骤1：getY()为公有属性方法</span>
<span class="token comment">// 步骤2：this指向 f2</span>
<span class="token comment">// 步骤3：执行共有属性方法： console.log(this.y)=&gt; 200</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Fn</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 步骤1：getY()为公有属性方法</span>
<span class="token comment">// 步骤2：this指向 Fn.prototype</span>
<span class="token comment">// 步骤3：执行共有属性方法： console.log(this.y)=&gt; undefined</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/JavaScript/basics/01：构造函数执行的细节知识点.html" class="prev">
        01：构造函数执行的细节知识点
      </a></span> <span class="next"><a href="/JavaScript/basics/03：内置new和Object.create的实现.html">
        03：内置new和Object.create的实现
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.06b24de5.js" defer></script><script src="/assets/js/2.a05443f6.js" defer></script><script src="/assets/js/54.6b19fef9.js" defer></script>
  </body>
</html>

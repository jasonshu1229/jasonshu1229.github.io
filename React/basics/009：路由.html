<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>什么是路由？ | 前端时光屋</title>
    <meta name="description" content="梁书豪的博客">
    <meta name="generator" content="VuePress 1.3.0">
    <link rel="icon" href="/assets/img/head.jpg">
    
    <link rel="preload" href="/assets/css/0.styles.83ce72a3.css" as="style"><link rel="preload" href="/assets/js/app.06b24de5.js" as="script"><link rel="preload" href="/assets/js/2.a05443f6.js" as="script"><link rel="preload" href="/assets/js/79.0897d95d.js" as="script"><link rel="prefetch" href="/assets/js/10.a5eaa95a.js"><link rel="prefetch" href="/assets/js/11.06e35382.js"><link rel="prefetch" href="/assets/js/12.140f4db6.js"><link rel="prefetch" href="/assets/js/13.f2fcf962.js"><link rel="prefetch" href="/assets/js/14.e39a2df6.js"><link rel="prefetch" href="/assets/js/15.b07ecf86.js"><link rel="prefetch" href="/assets/js/16.949e4dac.js"><link rel="prefetch" href="/assets/js/17.6a721f97.js"><link rel="prefetch" href="/assets/js/18.1b363edf.js"><link rel="prefetch" href="/assets/js/19.900530d5.js"><link rel="prefetch" href="/assets/js/20.e9f183ae.js"><link rel="prefetch" href="/assets/js/21.6c08f73f.js"><link rel="prefetch" href="/assets/js/22.c37ad609.js"><link rel="prefetch" href="/assets/js/23.759a99ff.js"><link rel="prefetch" href="/assets/js/24.c8f3fa94.js"><link rel="prefetch" href="/assets/js/25.b58c3ab8.js"><link rel="prefetch" href="/assets/js/26.ba5e0c3b.js"><link rel="prefetch" href="/assets/js/27.ad23a71d.js"><link rel="prefetch" href="/assets/js/28.a74c53ca.js"><link rel="prefetch" href="/assets/js/29.30ef0dde.js"><link rel="prefetch" href="/assets/js/3.a21791ca.js"><link rel="prefetch" href="/assets/js/30.1e9ebdb5.js"><link rel="prefetch" href="/assets/js/31.30b7a1e3.js"><link rel="prefetch" href="/assets/js/32.9f1ded02.js"><link rel="prefetch" href="/assets/js/33.61ac7552.js"><link rel="prefetch" href="/assets/js/34.f040c739.js"><link rel="prefetch" href="/assets/js/35.2c5d08d5.js"><link rel="prefetch" href="/assets/js/36.257c41df.js"><link rel="prefetch" href="/assets/js/37.40a1bbc2.js"><link rel="prefetch" href="/assets/js/38.5415ab64.js"><link rel="prefetch" href="/assets/js/39.90b605f0.js"><link rel="prefetch" href="/assets/js/4.21591d40.js"><link rel="prefetch" href="/assets/js/40.5e9ae863.js"><link rel="prefetch" href="/assets/js/41.884155d7.js"><link rel="prefetch" href="/assets/js/42.1ec6dd60.js"><link rel="prefetch" href="/assets/js/43.47cf7283.js"><link rel="prefetch" href="/assets/js/44.7af49fad.js"><link rel="prefetch" href="/assets/js/45.6088e1a9.js"><link rel="prefetch" href="/assets/js/46.fd004b63.js"><link rel="prefetch" href="/assets/js/47.044fc351.js"><link rel="prefetch" href="/assets/js/48.55a5f3fb.js"><link rel="prefetch" href="/assets/js/49.e103d7ad.js"><link rel="prefetch" href="/assets/js/5.db726197.js"><link rel="prefetch" href="/assets/js/50.f945ce05.js"><link rel="prefetch" href="/assets/js/51.316d410a.js"><link rel="prefetch" href="/assets/js/52.92a10b4a.js"><link rel="prefetch" href="/assets/js/53.e7534ba4.js"><link rel="prefetch" href="/assets/js/54.6b19fef9.js"><link rel="prefetch" href="/assets/js/55.e3fc3b29.js"><link rel="prefetch" href="/assets/js/56.0e152b3e.js"><link rel="prefetch" href="/assets/js/57.13187b13.js"><link rel="prefetch" href="/assets/js/58.d9bda000.js"><link rel="prefetch" href="/assets/js/59.da580bc1.js"><link rel="prefetch" href="/assets/js/6.ecb72c20.js"><link rel="prefetch" href="/assets/js/60.285d6cbd.js"><link rel="prefetch" href="/assets/js/61.2cdcce13.js"><link rel="prefetch" href="/assets/js/62.cf643bd2.js"><link rel="prefetch" href="/assets/js/63.137e165f.js"><link rel="prefetch" href="/assets/js/64.ce851e8d.js"><link rel="prefetch" href="/assets/js/65.8e7d5299.js"><link rel="prefetch" href="/assets/js/66.4369c90e.js"><link rel="prefetch" href="/assets/js/67.c769b698.js"><link rel="prefetch" href="/assets/js/68.bf74184c.js"><link rel="prefetch" href="/assets/js/69.17c602b3.js"><link rel="prefetch" href="/assets/js/7.6cbb1600.js"><link rel="prefetch" href="/assets/js/70.55df3357.js"><link rel="prefetch" href="/assets/js/71.4fccac4a.js"><link rel="prefetch" href="/assets/js/72.d4eeaf2a.js"><link rel="prefetch" href="/assets/js/73.30f9528a.js"><link rel="prefetch" href="/assets/js/74.4e91b153.js"><link rel="prefetch" href="/assets/js/75.cbd8b825.js"><link rel="prefetch" href="/assets/js/76.72f7b4b9.js"><link rel="prefetch" href="/assets/js/77.a30e1989.js"><link rel="prefetch" href="/assets/js/78.3c4b8b32.js"><link rel="prefetch" href="/assets/js/8.36911a7c.js"><link rel="prefetch" href="/assets/js/80.43c8044b.js"><link rel="prefetch" href="/assets/js/81.89c13b3c.js"><link rel="prefetch" href="/assets/js/82.df5cf081.js"><link rel="prefetch" href="/assets/js/83.885deed2.js"><link rel="prefetch" href="/assets/js/84.4ed1e2fa.js"><link rel="prefetch" href="/assets/js/85.8bade5eb.js"><link rel="prefetch" href="/assets/js/86.d39c8dda.js"><link rel="prefetch" href="/assets/js/87.15d43505.js"><link rel="prefetch" href="/assets/js/88.ee14fb59.js"><link rel="prefetch" href="/assets/js/89.c5ea7888.js"><link rel="prefetch" href="/assets/js/9.6d6cea10.js"><link rel="prefetch" href="/assets/js/90.2e83c22b.js"><link rel="prefetch" href="/assets/js/91.972a9ec4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.83ce72a3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">前端时光屋</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript" class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/JavaScript/basics/" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/advance/" class="nav-link">
  进阶
</a></li></ul></div></div><div class="nav-item"><a href="/Vue/base/" class="nav-link">
  Vue
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="React" class="dropdown-title"><span class="title">React</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/React/basics/" class="nav-link router-link-active">
  用法
</a></li><li class="dropdown-item"><!----> <a href="/React/advance/" class="nav-link">
  原理
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Node" class="dropdown-title"><span class="title">Node</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Node/basics/" class="nav-link">
  用法
</a></li><li class="dropdown-item"><!----> <a href="/Node/advance/" class="nav-link">
  原理
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Webpack" class="dropdown-title"><span class="title">Webpack</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Webpack/basics/" class="nav-link">
  用法
</a></li><li class="dropdown-item"><!----> <a href="/Webpack/advance/" class="nav-link">
  原理
</a></li></ul></div></div><div class="nav-item"><a href="/Performance/" class="nav-link">
  性能相关
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试相关" class="dropdown-title"><span class="title">面试相关</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Interview/js/" class="nav-link">
  js
</a></li><li class="dropdown-item"><!----> <a href="/Interview/vue/" class="nav-link">
  vue
</a></li><li class="dropdown-item"><!----> <a href="/Interview/react/" class="nav-link">
  react
</a></li><li class="dropdown-item"><!----> <a href="/Interview/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/Interview/http/" class="nav-link">
  http
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript" class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/JavaScript/basics/" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/advance/" class="nav-link">
  进阶
</a></li></ul></div></div><div class="nav-item"><a href="/Vue/base/" class="nav-link">
  Vue
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="React" class="dropdown-title"><span class="title">React</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/React/basics/" class="nav-link router-link-active">
  用法
</a></li><li class="dropdown-item"><!----> <a href="/React/advance/" class="nav-link">
  原理
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Node" class="dropdown-title"><span class="title">Node</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Node/basics/" class="nav-link">
  用法
</a></li><li class="dropdown-item"><!----> <a href="/Node/advance/" class="nav-link">
  原理
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Webpack" class="dropdown-title"><span class="title">Webpack</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Webpack/basics/" class="nav-link">
  用法
</a></li><li class="dropdown-item"><!----> <a href="/Webpack/advance/" class="nav-link">
  原理
</a></li></ul></div></div><div class="nav-item"><a href="/Performance/" class="nav-link">
  性能相关
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试相关" class="dropdown-title"><span class="title">面试相关</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Interview/js/" class="nav-link">
  js
</a></li><li class="dropdown-item"><!----> <a href="/Interview/vue/" class="nav-link">
  vue
</a></li><li class="dropdown-item"><!----> <a href="/Interview/react/" class="nav-link">
  react
</a></li><li class="dropdown-item"><!----> <a href="/Interview/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/Interview/http/" class="nav-link">
  http
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>React的基础用法</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/React/basics/001：react基础知识.html" class="sidebar-link">001：react基础知识</a></li><li><a href="/React/basics/002：组件的数据挂载方式.html" class="sidebar-link">002：组件的数据挂载方式</a></li><li><a href="/React/basics/003：todolist-demo.html" class="sidebar-link">003：todolist-demo</a></li><li><a href="/React/basics/004：组件的细节知识.html" class="sidebar-link">004：组件的细节知识</a></li><li><a href="/React/basics/005：setState-用法原理.html" class="sidebar-link">005：setState-用法原理</a></li><li><a href="/React/basics/006：组件通信的方式.html" class="sidebar-link">006：组件通信的方式</a></li><li><a href="/React/basics/007：新（旧）生命周期.html" class="sidebar-link">007：新（旧）生命周期</a></li><li><a href="/React/basics/008：slot和动态组件.html" class="sidebar-link">008：slot和动态组件</a></li><li><a href="/React/basics/009：路由.html" class="active sidebar-link">009：路由</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/React/basics/009：路由.html#什么是路由？" class="sidebar-link">什么是路由？</a></li><li class="sidebar-sub-header"><a href="/React/basics/009：路由.html#路由安装" class="sidebar-link">路由安装</a></li><li class="sidebar-sub-header"><a href="/React/basics/009：路由.html#路由使用" class="sidebar-link">路由使用</a></li><li class="sidebar-sub-header"><a href="/React/basics/009：路由.html#hashrouter与browserrouter的异同" class="sidebar-link">HashRouter与BrowserRouter的异同</a></li><li class="sidebar-sub-header"><a href="/React/basics/009：路由.html#嵌套路由-父子关系的路由" class="sidebar-link">嵌套路由(父子关系的路由)</a></li><li class="sidebar-sub-header"><a href="/React/basics/009：路由.html#路由跳转方式" class="sidebar-link">路由跳转方式</a></li><li class="sidebar-sub-header"><a href="/React/basics/009：路由.html#公共组件抽离之后的路由跳转" class="sidebar-link">公共组件抽离之后的路由跳转</a></li><li class="sidebar-sub-header"><a href="/React/basics/009：路由.html#路由传参" class="sidebar-link">路由传参</a></li><li class="sidebar-sub-header"><a href="/React/basics/009：路由.html#路由拦截" class="sidebar-link">路由拦截</a></li><li class="sidebar-sub-header"><a href="/React/basics/009：路由.html#withrouter的应用于原理" class="sidebar-link">withRouter的应用于原理</a></li></ul></li><li><a href="/React/basics/010：项目注意事项.html" class="sidebar-link">010：项目注意事项</a></li><li><a href="/React/basics/011：redux - react redux.html" class="sidebar-link">011：redux - react redux</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="什么是路由？"><a href="#什么是路由？" class="header-anchor">#</a> 什么是路由？</h2> <p>路由是根据不同的<strong>url</strong>地址展示不同的内容或页面。 一个针对React而设计的路由解决方案、可以友好的帮你解决<strong>React components</strong> 到 <strong>URl</strong>之间的<strong>同步映射</strong>关系。</p> <p>示例网站：
<a href="https://reactrouter.com/web/example/basic" target="_blank" rel="noopener noreferrer">react-router示例<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="路由安装"><a href="#路由安装" class="header-anchor">#</a> 路由安装</h2> <div class="language-js extra-class"><pre class="language-js"><code>npm install react‐router‐dom
</code></pre></div><h2 id="路由使用"><a href="#路由使用" class="header-anchor">#</a> 路由使用</h2> <ol><li>路由导入</li></ol> <p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ghwgdf751ej30za0f276k.jpg" alt="路由导入方法"></p> <ol start="2"><li>定义路由及重定向</li></ol> <p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ghwgh1bgajj30yw0ow79n.jpg" alt="定义路由及重定向"></p> <p>使用<strong>Redirect</strong>进行路由<strong>重定向匹配</strong>，由于是贪婪匹配，在上面例子中，如果<strong>已经匹配</strong>到了<strong>center</strong>路由，此时刷新页面会继续匹配到**/**根路由。</p> <p>所以一般在使用<strong>HashRouter</strong>时配套使用<strong>Switch</strong>，匹配到路由之后立马跳出，只能匹配到第一个符合条件的路由。</p> <h2 id="hashrouter与browserrouter的异同"><a href="#hashrouter与browserrouter的异同" class="header-anchor">#</a> HashRouter与BrowserRouter的异同</h2> <p>HashRouter的特点：<strong>localhost:3000/#/film</strong></p> <ol><li><p>HashRouter在路径中包含了**#<strong>，相当于锚点定位，因此不论</strong>#**后面的路径怎么变化，请求的都相当于是#之前的那个页面，可以很容易的进行前后端不分离的部署(也就是把前端打包后的文件放到服务器端的public或static里)。</p></li> <li><p>这个警告只有在hash 模式会出现(因为Hash模式下，默认浏览器不会记录重复点击的路由记录)，在NavLink 加上 replace 来解决，但轻易不要使用。（此警告并无大碍）</p></li></ol> <p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ghwgtbgjizj314608kjt8.jpg" alt=""></p> <p>BrowserRouter的特点也是弊端：<strong>localhost:3000/flim</strong></p> <p>因为BrowserRouter模式下请求的链接都是ip地址: 端口/xxxx/xxxx，因此相当于每个URL都会访问一个不同的后端地址，如果后端没有覆盖到路由就会产生404错误。</p> <p><b>解决方案</b>：加入中间件解决，放在服务器端路由匹配的最后，如果前面的API接口都不匹配，则返回index. html页面。但这样也有一些小问题，因为要求前端路由和后端路由的URL不能重复。</p> <p>比如商品列表组件叫/product/list，而请求商品列表的API也是/product/list，那么就会访问不到页面，而是被API接口匹配到。</p> <h2 id="嵌套路由-父子关系的路由"><a href="#嵌套路由-父子关系的路由" class="header-anchor">#</a> 嵌套路由(父子关系的路由)</h2> <p>定义在 src/Router/index. js 根路由里，当路由组件多的时候不利于维护</p> <p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ghwj4uqz0ej317s0u0wm6.jpg" alt=""></p> <p>所以我们最好在，父子路由需要嵌套的时候，把<strong>子路由写在父路由里</strong>，比如，我写的组件顺序是<strong>App、Film(Nowplaying, Comingsoon)、Cinema、Center</strong>，<strong>flim</strong>路由包括<strong>nowplaying，comingsoon</strong>路由，我们就把这两个分路由，定义在<strong>flim</strong>路由组件里。</p> <p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ghwjlvm6l1j31a20ii0ws.jpg" alt=""></p> <h2 id="路由跳转方式"><a href="#路由跳转方式" class="header-anchor">#</a> 路由跳转方式</h2> <ol><li>声明式导航 <strong>NavLink</strong>根据className判断自带高亮效果</li></ol> <p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ghwjnsr5xqj31a80c8whj.jpg" alt="声明式导航"></p> <ol start="2"><li>编程式导航：通过**this.props.history.push()**跳转路由</li></ol> <p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ghwk005tydj30vi0aewg0.jpg" alt="编程式导航"></p> <p><b>如果想要做<strong>列表页路由跳转详情页面路由</strong></b>，步骤是：</p> <ol><li>先在列表页<strong>nowplaying</strong>取得每条信息的<strong>id</strong>值，</li> <li>在根路由配置 <strong>详情页面的</strong>的<strong>myid</strong></li> <li>根据不同的<strong>myid</strong>跳转不同的详情页路由</li></ol> <p>步骤1：</p> <p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ghwk005tydj30vi0aewg0.jpg" alt="编程式导航"></p> <p>步骤2：
<img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ghwk44ks59j31a00ag0un.jpg" alt=""></p> <p>步骤3：
<img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ghwlbybd2bj31a80jgtct.jpg" alt=""></p> <blockquote><p>注释：
此时的<strong>myid</strong>属性，是由根路由层，包裹的<strong>Route</strong>传递过来的，而并非<strong>父亲组件传递</strong>
此时的<strong>myid</strong>属性，是列表页(nowplaying) map遍历的数组每一项</p></blockquote> <p>使用React-devtools扩展工具，可以看到<strong>myid</strong>是从最一开始的<strong>Route</strong>包裹传递的。</p> <p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ghwlhujg8wj31fp0u0gud.jpg" alt=""> <img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ghwlks4nd3j30k5027aac.jpg" alt=""></p> <p><b>我们再来看一下，Route</b>还能给它包裹的组件传递什么东西？
<img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ghwlq1i6wbj318y0u047d.jpg" alt=""></p> <ul><li>this. props. history. go(-1)  回到上一个页面 ，回退几层</li> <li>this. props. history. goBack( ) 回退页面</li> <li>this. props. history. goForward( ) 前进页面</li></ul> <p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ghxelspacbj30p60iq79w.jpg" alt=""></p> <h2 id="公共组件抽离之后的路由跳转"><a href="#公共组件抽离之后的路由跳转" class="header-anchor">#</a> 公共组件抽离之后的路由跳转</h2> <h3 id="方法一-父组件传值"><a href="#方法一-父组件传值" class="header-anchor">#</a> 方法一 - 父组件传值</h3> <p>遇到上图这种的，正在热映模块和即将上映模块结构类似的组件时，我们可以把<strong>nowplaying和comingsoon</strong>组件中，重复的<strong>li</strong>部分提取成公共组件<strong>FilmItem</strong>后，再引入时，就需要在<strong>FilmItem</strong>组件上再次传递<strong>this. props. history</strong>属性</p> <p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ghxe4c9crrj31as0q8wj5.jpg" alt=""></p> <p>当然也可以简写成</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>FilmItem key<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span> item<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token operator">...</span> <span class="token keyword">this</span><span class="token punctuation">.</span> props<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>FilmItem<span class="token operator">&gt;</span>
</code></pre></div><p>这样我们又可以在封装之后的<strong>FilmItem</strong>里继续跳转路由了
<img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ghxe6d4dq0j31a80hin0g.jpg" alt=""></p> <h3 id="方法二-高阶组件（withrouter）"><a href="#方法二-高阶组件（withrouter）" class="header-anchor">#</a> 方法二 - 高阶组件（withRouter）</h3> <p>在后面。我们会详细介绍高阶组件，可以简单理解为 <strong>高阶组件</strong>为其包裹组件包裹生成了一个<strong>干爹组件</strong>，把需要的属性，我们传递进来。</p> <p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ghxevni3l4j316k0n6jwa.jpg" alt=""></p> <h2 id="路由传参"><a href="#路由传参" class="header-anchor">#</a> 路由传参</h2> <div class="language-js extra-class"><pre class="language-js"><code>（<span class="token number">1</span>）
<span class="token keyword">this</span><span class="token punctuation">.</span> props<span class="token punctuation">.</span> history<span class="token punctuation">.</span> <span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> pathname <span class="token operator">:</span> <span class="token string">'/user'</span> <span class="token punctuation">,</span> query <span class="token operator">:</span> <span class="token punctuation">{</span> day<span class="token operator">:</span> <span class="token string">'Friday'</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 通过下面这个接收到参数</span>
<span class="token keyword">this</span><span class="token punctuation">.</span> props<span class="token punctuation">.</span> location<span class="token punctuation">.</span> query<span class="token punctuation">.</span> day

（<span class="token number">2</span>）
<span class="token keyword">this</span><span class="token punctuation">.</span> props<span class="token punctuation">.</span> history<span class="token punctuation">.</span> <span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> pathname<span class="token operator">:</span><span class="token string">'/user'</span><span class="token punctuation">,</span> state<span class="token operator">:</span><span class="token punctuation">{</span>day <span class="token operator">:</span> <span class="token string">'Friday'</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 通过下面这个接收到参数</span>
<span class="token keyword">this</span><span class="token punctuation">.</span> props<span class="token punctuation">.</span> location<span class="token punctuation">.</span> state<span class="token punctuation">.</span> day
</code></pre></div><p>不建议使用上面这两种传参方式，因为当我们做单页面应用SPA时，这些参数变量，会存储在<strong>内存</strong>中，页面刷新会丢失。</p> <p>还是建议使用<strong>动态路由传参</strong>。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span> props<span class="token punctuation">.</span> history<span class="token punctuation">.</span> <span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">**</span><span class="token operator">/</span>detail<span class="token operator">/</span>$<span class="token punctuation">{</span>id<span class="token punctuation">}</span><span class="token operator">**</span><span class="token punctuation">)</span>

<span class="token comment">// 通过下面这个接收到参数</span>
<span class="token keyword">this</span><span class="token punctuation">.</span> props<span class="token punctuation">.</span> match<span class="token punctuation">,</span> params<span class="token punctuation">.</span> myid
</code></pre></div><p>注意这个<strong>myid</strong>，是我在根路由中配置的。</p> <p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ghxfgz9eu7j31a00aggmq.jpg" alt=""></p> <h2 id="路由拦截"><a href="#路由拦截" class="header-anchor">#</a> 路由拦截</h2> <p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ghxfpx7ezej314g0b2ac5.jpg" alt=""></p> <h2 id="withrouter的应用于原理"><a href="#withrouter的应用于原理" class="header-anchor">#</a> withRouter的应用于原理</h2> <p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ghxfr8jczsj315a0bujtq.jpg" alt=""></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/React/basics/008：slot和动态组件.html" class="prev">
        008：slot和动态组件
      </a></span> <span class="next"><a href="/React/basics/010：项目注意事项.html">
        010：项目注意事项
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.06b24de5.js" defer></script><script src="/assets/js/2.a05443f6.js" defer></script><script src="/assets/js/79.0897d95d.js" defer></script>
  </body>
</html>

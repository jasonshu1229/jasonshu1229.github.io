(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{234:function(t,a,s){"use strict";s.r(a);var n=s(0),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"ç¼–è€…èè¯­ï¼š"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç¼–è€…èè¯­ï¼š"}},[t._v("#")]),t._v(" ç¼–è€…èè¯­ï¼š")]),t._v(" "),s("p",[t._v("ä½¿ç”¨è¿‡Vueå’ŒReactçš„å°ä¼™ä¼´è‚¯å®šå¯¹è™šæ‹ŸDomå’Œdiffç®—æ³•å¾ˆç†Ÿæ‚‰ï¼Œå®ƒæ‰®æ¼”ç€å¾ˆé‡è¦çš„è§’è‰²ã€‚")]),t._v(" "),s("p",[t._v("é‚£ä¹ˆå®ƒä»¬æ˜¯åˆå¦‚ä½•è¾…åŠ©æˆ‘ä»¬å¼€å‘è€…å®Œæˆé‚£äº›æˆå°±æ„Ÿçˆ†æ£šçš„é¡¹ç›®å‘¢ï¼Œå°±è®©æœ¬æ–‡å¸¦ä½ ä¸€æ­¥ä¸€æ­¥ææ‡‚å®ƒã€‚")]),t._v(" "),s("h2",{attrs:{id:"è™šæ‹Ÿdom"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è™šæ‹Ÿdom"}},[t._v("#")]),t._v(" è™šæ‹ŸDOM")]),t._v(" "),s("h3",{attrs:{id:"ä»€ä¹ˆæ˜¯è™šæ‹Ÿdomï¼Ÿ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæ˜¯è™šæ‹Ÿdomï¼Ÿ"}},[t._v("#")]),t._v(" ä»€ä¹ˆæ˜¯è™šæ‹ŸDOMï¼Ÿ")]),t._v(" "),s("p",[t._v("è™šæ‹ŸDOMï¼ˆVirtual Domï¼‰ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„"),s("strong",[t._v("è™šæ‹ŸèŠ‚ç‚¹")]),t._v("ï¼Œæ˜¯ç”¨JSå¯¹è±¡æ¥ "),s("strong",[t._v("æ¨¡æ‹ŸçœŸå®DOM")]),t._v("ä¸­çš„èŠ‚ç‚¹ï¼Œè¯¥å¯¹è±¡ "),s("strong",[t._v("åŒ…å«äº†çœŸå®DOMçš„ç»“æ„åŠå…¶å±æ€§")]),t._v("ï¼Œç”¨äºå¯¹æ¯”è™šæ‹ŸDOMå’ŒçœŸå®DOMçš„å·®å¼‚ï¼Œä»è€Œè¿›è¡Œ"),s("strong",[t._v("å±€éƒ¨æ¸²æŸ“")]),t._v("æ¥è¾¾åˆ°"),s("strong",[t._v("ä¼˜åŒ–æ€§èƒ½")]),t._v("çš„ç›®çš„ã€‚")]),t._v(" "),s("p",[t._v("çœŸå®çš„å…ƒç´ èŠ‚ç‚¹ï¼š")]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("wrap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("title"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Hello world!"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("  \n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[t._v("VNodeï¼š")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  tag"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'div'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  attrs"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'wrap'")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  children"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    tag"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'p'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    text"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Hello world!'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    attrs"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'title'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"ä¸ºä»€ä¹ˆä½¿ç”¨è™šæ‹Ÿdomï¼Ÿ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ºä»€ä¹ˆä½¿ç”¨è™šæ‹Ÿdomï¼Ÿ"}},[t._v("#")]),t._v(" ä¸ºä»€ä¹ˆä½¿ç”¨è™šæ‹ŸDOMï¼Ÿ")]),t._v(" "),s("p",[t._v("èµ·åˆæˆ‘ä»¬åœ¨ä½¿ç”¨JS/JQueryæ—¶ï¼Œä¸å¯é¿å…çš„ä¼šå¤§é‡æ“ä½œDOMï¼Œè€ŒDOMçš„å˜åŒ–åˆä¼šå¼•å‘å›æµæˆ–é‡ç»˜ï¼Œä»è€Œé™ä½é¡µé¢æ¸²æŸ“æ€§èƒ½ã€‚")]),t._v(" "),s("p",[t._v("é‚£ä¹ˆæ€æ ·æ¥å‡å°‘å¯¹DOMçš„æ“ä½œå‘¢ï¼Ÿ")]),t._v(" "),s("p",[t._v("æ­¤æ—¶è™šæ‹ŸDOMåº”ç”¨è€Œç”Ÿï¼Œæ‰€ä»¥è™šæ‹ŸDOMå‡ºç°çš„ä¸»è¦ç›®çš„å°±æ˜¯ä¸ºäº†"),s("strong",[t._v("å‡å°‘é¢‘ç¹æ“ä½œDOMè€Œå¼•èµ·å›æµé‡ç»˜æ‰€å¼•å‘çš„æ€§èƒ½é—®é¢˜çš„")]),t._v("ï¼")]),t._v(" "),s("h3",{attrs:{id:"è™šæ‹Ÿdomçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è™šæ‹Ÿdomçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ"}},[t._v("#")]),t._v(" è™šæ‹ŸDOMçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ")]),t._v(" "),s("p",[s("b",[t._v("1.å…¼å®¹æ€§å¥½ï¼š")]),t._v(" å› ä¸ºVnodeæœ¬è´¨æ˜¯JSå¯¹è±¡ï¼Œæ‰€ä»¥ä¸ç®¡Nodeè¿˜æ˜¯æµè§ˆå™¨ç¯å¢ƒï¼Œéƒ½å¯ä»¥æ“ä½œï¼›")]),t._v(" "),s("p",[s("b",[t._v("2.Domå¯å¤ç”¨æ€§å¢å¤§ï¼š")]),t._v("å‡å°‘äº†å¯¹Domçš„æ“ä½œã€‚é¡µé¢ä¸­çš„æ•°æ®å’ŒçŠ¶æ€å˜åŒ–ï¼Œéƒ½é€šè¿‡Vnode "),s("strong",[t._v("å¯¹æ¯”")]),t._v("ï¼Œåªéœ€è¦åœ¨æ¯”å¯¹å®Œä¹‹å "),s("strong",[t._v("æ›´æ–°DOM")]),t._v("ï¼Œ"),s("strong",[t._v("ä¸éœ€è¦é¢‘ç¹")]),t._v(" æ“ä½œï¼Œ"),s("strong",[t._v("æé«˜äº†é¡µé¢æ€§èƒ½")]),t._v("ï¼›")]),t._v(" "),s("h3",{attrs:{id:"è™šæ‹Ÿdomå’ŒçœŸå®domçš„åŒºåˆ«ï¼Ÿ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è™šæ‹Ÿdomå’ŒçœŸå®domçš„åŒºåˆ«ï¼Ÿ"}},[t._v("#")]),t._v(" è™šæ‹ŸDOMå’ŒçœŸå®DOMçš„åŒºåˆ«ï¼Ÿ")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("è™šæ‹ŸDOM"),s("strong",[t._v("ä¸")]),t._v("ä¼šè¿›è¡Œ"),s("strong",[t._v("å›æµ")]),t._v("å’Œ"),s("strong",[t._v("é‡ç»˜")]),t._v("ï¼›")])]),t._v(" "),s("li",[s("p",[t._v("çœŸå®DOMåœ¨é¢‘ç¹æ“ä½œæ—¶å¼•å‘çš„å›æµé‡ç»˜å¯¼è‡´æ€§èƒ½å¾ˆä½ï¼›")])]),t._v(" "),s("li",[s("p",[t._v("è™šæ‹ŸDOMé¢‘ç¹ä¿®æ”¹ï¼Œç„¶åä¸€æ¬¡æ€§å¯¹æ¯”å·®å¼‚å¹¶ä¿®æ”¹çœŸå®DOMï¼Œæœ€åè¿›è¡Œä¾æ¬¡å›æµé‡ç»˜ï¼Œå‡å°‘äº†çœŸå®DOMä¸­å¤šæ¬¡å›æµé‡ç»˜å¼•èµ·çš„æ€§èƒ½æŸè€—ï¼›")])]),t._v(" "),s("li",[s("p",[t._v("è™šæ‹ŸDOMæœ‰æ•ˆé™ä½å¤§é¢ç§¯çš„é‡ç»˜ä¸æ’ç‰ˆï¼Œå› ä¸ºæ˜¯å’ŒçœŸå®DOMå¯¹æ¯”ï¼Œæ›´æ–°å·®å¼‚éƒ¨åˆ†ï¼Œæ‰€ä»¥åªæ¸²æŸ“å±€éƒ¨ï¼›")])])]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("æ€»æŸè€— "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" çœŸå®"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DOM")]),t._v("å¢åˆ æ”¹ "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("å¤šèŠ‚ç‚¹"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" å›æµ "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" é‡ç»˜"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//è®¡ç®—ä½¿ç”¨çœŸå®DOMçš„æŸè€—")]),t._v("\næ€»æŸè€— "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" è™šæ‹Ÿ"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DOM")]),t._v("å¢åˆ æ”¹ "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("diffå¯¹æ¯”"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" çœŸå®"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DOM")]),t._v("å·®å¼‚åŒ–å¢åˆ æ”¹ "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("è¾ƒå°‘èŠ‚ç‚¹"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" å›æµ "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" é‡ç»˜"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//è®¡ç®—ä½¿ç”¨è™šæ‹ŸDOMçš„æŸè€—")]),t._v("\n")])])]),s("p",[t._v("å¯ä»¥å‘ç°ï¼Œéƒ½æ˜¯å›´ç»•é¢‘ç¹æ“ä½œçœŸå®DOMå¼•èµ·å›æµé‡ç»˜ï¼Œå¯¼è‡´é¡µé¢æ€§èƒ½æŸè€—æ¥è¯´çš„ã€‚ä¸è¿‡æ¡†æ¶ä¹Ÿä¸ä¸€å®šéè¦ä½¿ç”¨è™šæ‹ŸDOMï¼Œå…³é”®åœ¨äºçœ‹æ˜¯å¦é¢‘ç¹æ“ä½œä¼šå¼•èµ·å¤§é¢ç§¯çš„DOMæ“ä½œã€‚")]),t._v(" "),s("p",[t._v("é‚£ä¹ˆè™šæ‹ŸDOMç©¶ç«Ÿé€šè¿‡ä»€ä¹ˆæ–¹å¼æ¥å‡å°‘äº†é¡µé¢ä¸­é¢‘ç¹æ“ä½œDOMå‘¢ï¼Ÿè¿™å°±ä¸å¾—ä¸å»äº†è§£DOM Diffç®—æ³•äº†ã€‚")]),t._v(" "),s("h2",{attrs:{id:"diffç®—æ³•"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#diffç®—æ³•"}},[t._v("#")]),t._v(" DIFFç®—æ³•")]),t._v(" "),s("p",[t._v("å½“æ•°æ®å˜åŒ–æ—¶ï¼Œvueå¦‚ä½•æ¥æ›´æ–°è§†å›¾çš„ï¼Ÿå…¶å®å¾ˆç®€å•ï¼Œä¸€å¼€å§‹ä¼šæ ¹æ®çœŸå®DOMç”Ÿæˆè™šæ‹ŸDOMï¼Œå½“è™šæ‹ŸDOMæŸä¸ªèŠ‚ç‚¹çš„æ•°æ®æ”¹å˜åä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„Vnodeï¼Œç„¶åVNodeå’ŒoldVnodeå¯¹æ¯”ï¼ŒæŠŠä¸åŒçš„åœ°æ–¹ä¿®æ”¹åœ¨çœŸå®DOMä¸Šï¼Œæœ€åå†ä½¿å¾—oldVnodeçš„å€¼ä¸ºVnodeã€‚")]),t._v(" "),s("blockquote",[s("p",[t._v("diffè¿‡ç¨‹å°±æ˜¯è°ƒç”¨patchå‡½æ•°ï¼Œæ¯”è¾ƒæ–°è€èŠ‚ç‚¹ï¼Œä¸€è¾¹æ¯”è¾ƒä¸€è¾¹ç»™çœŸå®DOMæ‰“è¡¥ä¸(patch)ï¼›")])]),t._v(" "),s("p",[t._v("å¯¹ç…§vueæºç æ¥è§£æä¸€ä¸‹ï¼Œè´´å‡ºæ ¸å¿ƒä»£ç ï¼Œæ—¨åœ¨ç®€å•æ˜äº†è®²è¿°æ¸…æ¥šï¼Œä¸ç„¶å°ç¼–è‡ªå·±çœ‹ç€éƒ½å¤´å¤§äº†O(âˆ©_âˆ©)O")]),t._v(" "),s("h3",{attrs:{id:"patch"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#patch"}},[t._v("#")]),t._v(" patch")]),t._v(" "),s("p",[t._v("é‚£ä¹ˆpatchæ˜¯æ€æ ·æ‰“è¡¥ä¸çš„ï¼Ÿ")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//patchå‡½æ•°  oldVnode:è€èŠ‚ç‚¹   vnode:æ–°èŠ‚ç‚¹")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("patch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("oldVnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" vnode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sameVnode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("oldVnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" vnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("patchVnode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("oldVnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" vnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//å¦‚æœæ–°è€èŠ‚ç‚¹æ˜¯åŒä¸€èŠ‚ç‚¹,é‚£ä¹ˆè¿›ä¸€æ­¥é€šè¿‡patchVnodeæ¥æ¯”è¾ƒå­èŠ‚ç‚¹")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* -----å¦åˆ™æ–°èŠ‚ç‚¹ç›´æ¥æ›¿æ¢è€èŠ‚ç‚¹----- */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" oEl "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" oldVnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("el "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å½“å‰oldVnodeå¯¹åº”çš„çœŸå®å…ƒç´ èŠ‚ç‚¹")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" parentEle "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("parentNode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("oEl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// çˆ¶å…ƒç´ ")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createEle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ ¹æ®Vnodeç”Ÿæˆæ–°å…ƒç´ ")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("parentEle "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("insertBefore")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("parentEle"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" vnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("el"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("nextSibling")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("oEl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å°†æ–°å…ƒç´ æ·»åŠ è¿›çˆ¶å…ƒç´ ")]),t._v("\n      api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeChild")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("parentEle"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" oldVnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("el"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç§»é™¤ä»¥å‰çš„æ—§å…ƒç´ èŠ‚ç‚¹")]),t._v("\n      oldVnode "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" vnode\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//åˆ¤æ–­ä¸¤èŠ‚ç‚¹æ˜¯å¦ä¸ºåŒä¸€èŠ‚ç‚¹")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sameVnode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("key "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("key "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// keyå€¼")]),t._v("\n    a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tag "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tag "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ ‡ç­¾å")]),t._v("\n    a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isComment "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isComment "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ˜¯å¦ä¸ºæ³¨é‡ŠèŠ‚ç‚¹")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ˜¯å¦éƒ½å®šä¹‰äº†dataï¼ŒdataåŒ…å«ä¸€äº›å…·ä½“ä¿¡æ¯ï¼Œä¾‹å¦‚onclick , style")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isDef")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isDef")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sameInputType")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å½“æ ‡ç­¾æ˜¯<input>çš„æ—¶å€™ï¼Œtypeå¿…é¡»ç›¸åŒ")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("ä»ä¸Šé¢å¯ä»¥çœ‹å‡ºï¼Œpatchå‡½æ•°æ˜¯é€šè¿‡åˆ¤æ–­æ–°è€èŠ‚ç‚¹æ˜¯å¦ä¸ºåŒä¸€èŠ‚ç‚¹ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("å¦‚æœæ˜¯åŒä¸€èŠ‚ç‚¹ï¼Œæ‰§è¡ŒpatchVnodeè¿›è¡Œå­èŠ‚ç‚¹æ¯”è¾ƒï¼›")]),t._v(" "),s("li",[t._v("å¦‚æœä¸æ˜¯åŒä¸€èŠ‚ç‚¹ï¼Œæ–°èŠ‚ç‚¹ç›´æ¥æ›¿æ¢è€èŠ‚ç‚¹ï¼›")])]),t._v(" "),s("p",[t._v("é‚£å¦‚æœä¸æ˜¯åŒä¸€èŠ‚ç‚¹ï¼Œä½†æ˜¯å®ƒä»¬å­èŠ‚ç‚¹ä¸€æ ·æ€ä¹ˆåŠå˜ï¼Ÿ")]),t._v(" "),s("blockquote",[s("p",[t._v("è¦ç‰¢è®°ï¼š"),s("strong",[t._v("diffæ˜¯åŒå±‚æ¯”è¾ƒï¼Œä¸å­˜åœ¨è·¨çº§æ¯”è¾ƒçš„")]),t._v("ï¼ç®€å•æä¸€å˜´ï¼ŒReactä¸­ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå®ƒä»¬åªæ˜¯é’ˆå¯¹åŒä¸€å±‚çš„èŠ‚ç‚¹è¿›è¡Œæ¯”è¾ƒã€‚")])]),t._v(" "),s("h3",{attrs:{id:"patchvnode"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#patchvnode"}},[t._v("#")]),t._v(" patchVnode")]),t._v(" "),s("p",[t._v("æ—¢ç„¶åˆ°äº†patchVnodeæ–¹æ³•ï¼Œè¯´æ˜æ–°è€èŠ‚ç‚¹ä¸ºåŒä¸€èŠ‚ç‚¹ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–¹æ³•åšäº†ä»€ä¹ˆå¤„ç†ï¼Ÿ")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("patchVnode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("oldVnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" vnode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" el "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" vnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("el "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" oldVnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("el "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//æ‰¾åˆ°å¯¹åº”çš„çœŸå®DOM")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" oldCh "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" oldVnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("children"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    ch "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" vnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("children\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("oldVnode "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" vnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//å¦‚æœæ–°è€èŠ‚ç‚¹ç›¸åŒ,ç›´æ¥è¿”å›")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("oldVnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("text "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" vnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("text "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" oldVnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("text "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" vnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("text"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//å¦‚æœæ–°è€èŠ‚ç‚¹éƒ½æœ‰æ–‡æœ¬èŠ‚ç‚¹ä¸”ä¸ç›¸ç­‰,é‚£ä¹ˆæ–°èŠ‚ç‚¹çš„æ–‡æœ¬èŠ‚ç‚¹æ›¿æ¢è€èŠ‚ç‚¹çš„æ–‡æœ¬èŠ‚ç‚¹")]),t._v("\n    api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTextContent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("el"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" vnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("text"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateEle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("el"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" vnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" oldVnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("oldCh "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" ch "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" oldCh "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" ch"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//å¦‚æœæ–°è€èŠ‚ç‚¹éƒ½æœ‰å­èŠ‚ç‚¹,æ‰§è¡ŒupdateChildrenæ¯”è¾ƒå­èŠ‚ç‚¹[å¾ˆé‡è¦ä¹Ÿå¾ˆå¤æ‚,ä¸‹é¢å±•å¼€ä»‹ç»]")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateChildren")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("el"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" oldCh"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ch"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ch"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//å¦‚æœæ–°èŠ‚ç‚¹æœ‰å­èŠ‚ç‚¹è€Œè€èŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹,é‚£ä¹ˆå°†æ–°èŠ‚ç‚¹çš„å­èŠ‚ç‚¹æ·»åŠ åˆ°è€èŠ‚ç‚¹ä¸Š")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createEle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vnode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("oldCh"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//å¦‚æœæ–°èŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹è€Œè€èŠ‚ç‚¹æœ‰å­èŠ‚ç‚¹ï¼Œé‚£ä¹ˆåˆ é™¤è€èŠ‚ç‚¹çš„å­èŠ‚ç‚¹")]),t._v("\n      api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeChildren")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("el"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("å¦‚æœä¸¤ä¸ªèŠ‚ç‚¹ä¸ä¸€æ ·ï¼Œç›´æ¥ç”¨æ–°èŠ‚ç‚¹æ›¿æ¢è€èŠ‚ç‚¹ï¼›")]),t._v(" "),s("p",[t._v("å¦‚æœä¸¤ä¸ªèŠ‚ç‚¹ä¸€æ ·ï¼Œ")]),t._v(" "),s("ul",[s("li",[t._v("â€‹\tæ–°è€èŠ‚ç‚¹ä¸€æ ·ï¼Œç›´æ¥è¿”å›ï¼›")]),t._v(" "),s("li",[t._v("â€‹ è€èŠ‚ç‚¹æœ‰å­èŠ‚ç‚¹ï¼Œæ–°èŠ‚ç‚¹æ²¡æœ‰ï¼šåˆ é™¤è€èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ï¼›")]),t._v(" "),s("li",[t._v("â€‹\tè€èŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹ï¼Œæ–°èŠ‚ç‚¹æœ‰å­èŠ‚ç‚¹ï¼šæ–°èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ç›´æ¥appendåˆ°è€èŠ‚ç‚¹ï¼›")]),t._v(" "),s("li",[t._v("â€‹\téƒ½åªæœ‰æ–‡æœ¬èŠ‚ç‚¹ï¼šç›´æ¥ç”¨æ–°èŠ‚ç‚¹çš„æ–‡æœ¬èŠ‚ç‚¹æ›¿æ¢è€çš„æ–‡æœ¬èŠ‚ç‚¹ï¼›")]),t._v(" "),s("li",[t._v("â€‹\téƒ½æœ‰å­èŠ‚ç‚¹ï¼šupdateChildren")])]),t._v(" "),s("p",[t._v("æœ€å¤æ‚çš„æƒ…å†µä¹Ÿå°±æ˜¯æ–°è€èŠ‚ç‚¹éƒ½æœ‰å­èŠ‚ç‚¹ï¼Œé‚£ä¹ˆupdateChildrenæ˜¯å¦‚ä½•æ¥å¤„ç†è¿™ä¸€é—®é¢˜çš„ï¼Œè¯¥æ–¹æ³•ä¹Ÿæ˜¯diffç®—æ³•çš„æ ¸å¿ƒï¼Œä¸‹é¢æˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹ï¼")]),t._v(" "),s("h3",{attrs:{id:"updatechildren"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#updatechildren"}},[t._v("#")]),t._v(" updateChildren")]),t._v(" "),s("p",[t._v("ç”±äºä»£ç å¤ªå¤šäº†ï¼Œè¿™é‡Œå…ˆåšä¸ªæ¦‚è¿°ã€‚updateChildrenæ–¹æ³•çš„æ ¸å¿ƒï¼š")]),t._v(" "),s("ol",[s("li",[t._v("æå–å‡ºæ–°è€èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ï¼šæ–°èŠ‚ç‚¹å­èŠ‚ç‚¹chå’Œè€èŠ‚ç‚¹å­èŠ‚ç‚¹oldChï¼›")]),t._v(" "),s("li",[t._v("chå’ŒoldChåˆ†åˆ«è®¾ç½®StartIdxï¼ˆæŒ‡å‘å¤´ï¼‰å’ŒEndIdxï¼ˆæŒ‡å‘å°¾ï¼‰å˜é‡ï¼Œå®ƒä»¬ä¸¤ä¸¤æ¯”è¾ƒï¼ˆæŒ‰ç…§sameNodeæ–¹æ³•ï¼‰ï¼Œæœ‰å››ç§æ–¹å¼æ¥æ¯”è¾ƒã€‚å¦‚æœ4ç§æ–¹å¼éƒ½æ²¡æœ‰åŒ¹é…æˆåŠŸï¼Œå¦‚æœè®¾ç½®äº†keyå°±é€šè¿‡keyè¿›è¡Œæ¯”è¾ƒï¼Œåœ¨æ¯”è¾ƒè¿‡ç¨‹ç§startIdx++ï¼ŒendIdx--ï¼Œä¸€æ—¦StartIdx > EndIdxè¡¨æ˜chæˆ–è€…oldChè‡³å°‘æœ‰ä¸€ä¸ªå·²ç»éå†å®Œæˆï¼Œæ­¤æ—¶å°±ä¼šç»“æŸæ¯”è¾ƒã€‚")])]),t._v(" "),s("p",[t._v("ä¸‹é¢ç»“åˆå›¾æ¥ç†è§£ï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/007S8ZIlly1gi4nef9ewhj30hj0h20um.jpg",alt:""}})]),t._v(" "),s("p",[t._v("ç¬¬ä¸€æ­¥ï¼š")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("oldStartIdx "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("A")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" oldEndIdx "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("C")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nnewStartIdx "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("A")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" newEndIdx "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("D")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("æ­¤æ—¶oldStartIdxå’ŒnewStarIdxåŒ¹é…ï¼Œæ‰€ä»¥å°†domä¸­çš„AèŠ‚ç‚¹æ”¾åˆ°ç¬¬ä¸€ä¸ªä½ç½®ï¼Œæ­¤æ—¶Aå·²ç»åœ¨ç¬¬ä¸€ä¸ªä½ç½®ï¼Œæ‰€ä»¥ä¸åšå¤„ç†ï¼Œæ­¤æ—¶çœŸå®DOMé¡ºåºï¼šA  B  Cï¼›")]),t._v(" "),s("p",[t._v("ç¬¬äºŒæ­¥ï¼š")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("oldStartIdx "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("B")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" oldEndIdx "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("C")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nnewStartIdx "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("C")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" oldEndIdx "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("D")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/007S8ZIlly1gi4nf4l6t9j30hj0eimyn.jpg",alt:""}})]),t._v(" "),s("p",[t._v("æ­¤æ—¶oldEndIdxå’ŒnewStartIdxåŒ¹é…ï¼Œå°†åŸæœ¬çš„CèŠ‚ç‚¹ç§»åŠ¨åˆ°Aåé¢ï¼Œæ­¤æ—¶çœŸå®DOMé¡ºåºï¼šA   C   Bï¼›")]),t._v(" "),s("p",[t._v("ç¬¬ä¸‰æ­¥ï¼š")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("oldStartIdx "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("C")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" oldEndIdx "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("C")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nnewStartIdx "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("B")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" newEndIdx "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("D")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\noldStartIdx"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" oldEndIdx"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\noldStartIdx "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" oldEndIdx\n")])])]),s("p",[t._v("æ­¤æ—¶éå†ç»“æŸï¼ŒoldChå·²ç»éå†å®Œï¼Œé‚£ä¹ˆå°†å‰©ä½™çš„chèŠ‚ç‚¹æ ¹æ®è‡ªå·±çš„indexæ’å…¥åˆ°çœŸå®DOMä¸­å³å¯ï¼Œæ­¤æ—¶çœŸå®DOMé¡ºåºï¼šA  C  B  Dï¼›")]),t._v(" "),s("p",[t._v("æ‰€ä»¥åŒ¹é…è¿‡ç¨‹ä¸­åˆ¤æ–­ç»“æŸæœ‰ä¸¤ä¸ªæ¡ä»¶ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("oldStartIdx > oldEndIdxè¡¨ç¤ºoldChå…ˆéå†å®Œæˆï¼Œå¦‚æœchæœ‰å‰©ä½™èŠ‚ç‚¹å°±æ ¹æ®å¯¹åº”indexæ·»åŠ åˆ°çœŸå®DOMä¸­ï¼›")]),t._v(" "),s("li",[t._v("newStartIdx > newEndIdxè¡¨ç¤ºchå…ˆéå†å®Œæˆï¼Œé‚£ä¹ˆå°±è¦åœ¨çœŸå®DOMä¸­å°†å¤šä½™èŠ‚ç‚¹åˆ é™¤æ‰ï¼›")])]),t._v(" "),s("p",[t._v("çœ‹ä¸‹å›¾è¿™ä¸ªå®ä¾‹ï¼Œå°±æ˜¯æ–°èŠ‚ç‚¹å…ˆéå†å®Œæˆåˆ é™¤å¤šä½™èŠ‚ç‚¹ï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/007S8ZIlly1gi4nfl391jj310g0fz782.jpg",alt:""}})]),t._v(" "),s("p",[t._v("æœ€åï¼Œåœ¨è¿™äº›å­èŠ‚ç‚¹sameVnodeåå¦‚æœæ»¡è¶³æ¡ä»¶ç»§ç»­æ‰§è¡ŒpatchVnodeï¼Œå±‚å±‚é€’å½’ï¼Œç›´åˆ°oldVnodeå’ŒVnodeä¸­æ‰€æœ‰å­èŠ‚ç‚¹éƒ½æ¯”å¯¹å®Œæˆï¼Œä¹Ÿå°±æŠŠæ‰€æœ‰çš„è¡¥ä¸éƒ½æ‰“å¥½äº†ï¼Œæ­¤æ—¶æ›´æ–°åˆ°è§†å›¾ã€‚")]),t._v(" "),s("h2",{attrs:{id:"æ€»ç»“"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ€»ç»“"}},[t._v("#")]),t._v(" æ€»ç»“")]),t._v(" "),s("p",[t._v("æœ€åï¼Œç”¨ä¸€å¼ å›¾æ¥è®°å¿†æ•´ä¸ªDiffè¿‡ç¨‹ï¼Œå¸Œæœ›ä½ èƒ½æœ‰æ‰€æ”¶è·ï¼")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/007S8ZIlly1gi4nfrhiq4j315p0cggot.jpg",alt:""}})]),t._v(" "),s("h2",{attrs:{id:"å½©è›‹ï¼šreactçš„diffç®—æ³•"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å½©è›‹ï¼šreactçš„diffç®—æ³•"}},[t._v("#")]),t._v(" å½©è›‹ï¼šReactçš„diffç®—æ³•")]),t._v(" "),s("p",[t._v("è®²å®Œäº†Vueçš„diffç®—æ³•ï¼Œè®©æˆ‘ä»¬æ¥å¯¹æ¯”ä¸€ä¸‹Reactä¸­çš„diffç®—æ³•æ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿ")]),t._v(" "),s("h3",{attrs:{id:"diffç®—æ³•-ä¸‰ä¸ªè®¾è®¡æ€æƒ³"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#diffç®—æ³•-ä¸‰ä¸ªè®¾è®¡æ€æƒ³"}},[t._v("#")]),t._v(" diffç®—æ³•-ä¸‰ä¸ªè®¾è®¡æ€æƒ³")]),t._v(" "),s("ul",[s("li",[t._v("æ°¸è¿œ "),s("strong",[t._v("åªæ¯”è¾ƒåŒå±‚èŠ‚ç‚¹")])]),t._v(" "),s("li",[t._v("ä¸åŒçš„ä¸¤ä¸ªèŠ‚ç‚¹äº§ç”Ÿä¸åŒçš„domæ ‘")]),t._v(" "),s("li",[t._v("é€šè¿‡ "),s("strong",[t._v("key")]),t._v(" å€¼æŒ‡å®šå“ªäº›å…ƒç´ æ˜¯ç›¸åŒçš„")])]),t._v(" "),s("h3",{attrs:{id:"å…·ä½“æµç¨‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å…·ä½“æµç¨‹"}},[t._v("#")]),t._v(" å…·ä½“æµç¨‹")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("å¦‚æœåŒå±‚çš„ä¸¤ä¸ªèŠ‚ç‚¹ "),s("strong",[t._v("ä¸åŒ")])]),t._v(" "),s("ul",[s("li",[t._v("ç›´æ¥å°† "),s("strong",[t._v("åŸVDOM æ ‘ä¸Šè¯¥èŠ‚ç‚¹åŠè¯¥èŠ‚ç‚¹ä¸‹æ‰€æœ‰çš„åä»£èŠ‚ç‚¹ï¼Œå…¨éƒ¨æ›¿æ¢ä¸ºæ–°çš„ VDOM æ ‘ä¸ŠåŒä¸€ä½ç½®çš„èŠ‚ç‚¹")])])])]),t._v(" "),s("li",[s("p",[t._v("å¦‚æœåŒå±‚çš„ä¸¤ä¸ªèŠ‚ç‚¹ "),s("strong",[t._v("ç›¸åŒ")]),t._v(" ï¼Œ")]),t._v(" "),s("ul",[s("li",[t._v("éƒ½æ˜¯ "),s("strong",[t._v("DOM")]),t._v(" èŠ‚ç‚¹çš„è¯ï¼Œç›´æ¥æ›´æ–°DOMå±æ€§ï¼Œä»¥æ­¤ç±»æ¨ï¼Œå‘ä¸‹é€’å½’éå†å­èŠ‚ç‚¹ï¼Œé€šè¿‡å…ƒç´ ä¸Šç»‘å®šçš„ "),s("strong",[t._v("key")]),t._v(" å€¼ï¼Œæ‰€ä»¥ä¸€å®šè¦ä¿è¯å…¶å”¯ä¸€æ€§ï¼Œä¸€èˆ¬ä¸é‡‡ç”¨æ•°ç»„ä¸‹æ ‡ä½œä¸º "),s("strong",[t._v("key")]),t._v(" å€¼ï¼Œå› ä¸ºå½“æ•°ç»„å…ƒç´ å‘ç”Ÿå˜åŒ–æ—¶ï¼Œindexç´¢å¼•å€¼ä¹Ÿä¼šè·Ÿç€æ”¹å˜ã€‚")]),t._v(" "),s("li",[t._v("éƒ½æ˜¯ "),s("strong",[t._v("ç»„ä»¶èŠ‚ç‚¹")]),t._v(" çš„è¯ï¼Œä¼šä¿æŒå½“å‰ç»„ä»¶å®ä¾‹ä¸å˜ï¼Œæ›´æ–° "),s("strong",[t._v("props")]),t._v(" ï¼ŒåŒæ—¶è°ƒç”¨ç»„ä»¶å®ä¾‹çš„ "),s("strong",[t._v("componentWillReceiveProps()")]),t._v(" æ–¹æ³•å’Œ "),s("strong",[t._v("shouldComponentUpdate()")]),t._v(" æ–¹æ³•ï¼Œæ ¹æ®å…¶è¿”å›å€¼å†³å®šæ˜¯å¦è°ƒç”¨ "),s("strong",[t._v("render")]),t._v(" æ–¹æ³•ã€‚\nå¤„ç†å®Œè¯¥èŠ‚ç‚¹åï¼Œç»§ç»­å¯¹å­èŠ‚ç‚¹è¿›è¡Œé€’å½’ã€‚")])])])]),t._v(" "),s("h3",{attrs:{id:"çœ‹å®Œä¸‰ä»¶äº‹â¤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#çœ‹å®Œä¸‰ä»¶äº‹â¤"}},[t._v("#")]),t._v(" çœ‹å®Œä¸‰ä»¶äº‹â¤")]),t._v(" "),s("p",[t._v("å¦‚æœä½ è§‰å¾—è¿™ç¯‡å†…å®¹å¯¹ä½ è¿˜è›®æœ‰å¸®åŠ©ï¼Œæˆ‘æƒ³é‚€è¯·ä½ å¸®æˆ‘ä¸‰ä¸ªå°å¿™ï¼š")]),t._v(" "),s("ol",[s("li",[t._v("ç‚¹èµï¼Œè½¬å‘ï¼Œæœ‰ä½ ä»¬çš„ã€Œ "),s("code",[t._v("åœ¨çœ‹")]),t._v(" ã€ï¼Œæ‰æ˜¯æˆ‘åˆ›é€ çš„åŠ¨åŠ›ã€‚")]),t._v(" "),s("li",[t._v("å…³æ³¨å…¬ä¼—å· ã€ "),s("code",[t._v("å‰ç«¯æ—¶å…‰å±‹")]),t._v(" ã€ï¼Œä¸å®šæœŸåˆ†äº«åŸåˆ›çŸ¥è¯†ã€‚")]),t._v(" "),s("li",[t._v("åŒæ—¶å¯ä»¥æœŸå¾…åç»­æ–‡ç« ingğŸš€")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/007S8ZIlly1ghwblar34nj31yh0u04e7.jpg",alt:""}})])])}),[],!1,null,null,null);a.default=e.exports}}]);